"use strict";let url="https://studenter.miun.se/~bebj2100/writeable/moment5_webservice_vt22-BeaBjorn/rest.php";const courseCodeInput=document.getElementById("code"),courseNameInput=document.getElementById("name"),progressionInput=document.getElementById("progression"),syllabusInput=document.getElementById("courseSyllabus"),addBtn=document.getElementById("addBtn"),updateBtn=document.getElementById("updateBtn"),errorEl=document.getElementById("error");function init(){getCourses()}function getCourses(){fetch(url).then((e=>{if(200==e.status)return e.json().then((e=>printCourses(e))).catch((e=>console.log(e)))}))}function printCourses(e){const t=document.getElementById("courseList");t.innerHTML="",e.forEach((e=>{t.innerHTML+=`<li class="course" >${e.code} - ${e.name} - ${e.progression} - <a href="${e.courseSyllabus}">LÃ¤nk till kursplan</a><b class="delete" id="${e.id}">Radera</b></li>`}));let n=document.getElementsByClassName("course");for(let e=0;e<n.length;e++)n[e].addEventListener("click",deleteCourse)}function deleteCourse(e){let t=e.target.id;fetch(url+"?id="+t,{method:"DELETE"}).then((e=>e.json())).then((e=>getCourses())).catch((e=>console.log(e)))}function addCourse(e){e.preventDefault();let t=courseCodeInput.value,n=courseNameInput.value,o=progressionInput.value,s=syllabusInput.value,u=JSON.stringify({code:t,name:n,progression:o,courseSyllabus:s});fetch(url,{method:"POST",headers:{"content-type":"application/json"},body:u}).then((e=>e.json())).then((e=>clearList())).catch((e=>console.log(e)))}function clearList(){courseCodeInput.value="",courseNameInput.value="",progressionInput.value="",syllabusInput.value="",getCourses()}addBtn.addEventListener("click",addCourse),window.onload=init();